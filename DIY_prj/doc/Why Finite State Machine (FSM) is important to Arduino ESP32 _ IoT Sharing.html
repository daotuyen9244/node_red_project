<!DOCTYPE html>
<!-- saved from url=(0104)http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html -->
<html dir="ltr" lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://www.google.com/2005/gml/b" xmlns:data="http://www.google.com/2005/gml/data" xmlns:expr="http://www.google.com/2005/gml/expr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/3957297643-widget_css_bundle.css" rel="stylesheet" type="text/css">

<meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport">

<meta content="blogger" name="generator">
<link href="http://www.iotsharing.com/favicon.ico" rel="icon" type="image/x-icon">
<link href="http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html" rel="canonical">
<link rel="alternate" type="application/atom+xml" title="IoT Sharing - Atom" href="http://www.iotsharing.com/feeds/posts/default">
<link rel="alternate" type="application/rss+xml" title="IoT Sharing - RSS" href="http://www.iotsharing.com/feeds/posts/default?alt=rss">
<link rel="service.post" type="application/atom+xml" title="IoT Sharing - Atom" href="https://www.blogger.com/feeds/7549705215513488945/posts/default">

<link rel="alternate" type="application/atom+xml" title="IoT Sharing - Atom" href="http://www.iotsharing.com/feeds/3256809335366798245/comments/default">
<!--Can't find substitution for tag [blog.ieCssRetrofitLinks]-->
<meta content="http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html" property="og:url">
<meta content="Why Finite State Machine (FSM) is important to Arduino ESP32" property="og:title">
<meta content="This is a place where I can share my knowledge of: IoT, machine learning self learning and other interetsing topics." property="og:description">
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<link href="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/css" rel="stylesheet" type="text/css">
<link href="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/font-awesome.min.css" rel="stylesheet">
<title>Why Finite State Machine (FSM) is important to Arduino ESP32 ~ IoT Sharing</title>
<!--[if lt IE 9]> <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script> <![endif]-->
<style id="page-skin-1" type="text/css"><!--
/*
-----------------------------------------------
Blogger Template Style
Name:   Blogghiamo
Author: Lasantha Bandara
URL 1:  http://www.premiumbloggertemplates.com/
URL 2:  http://www.bloggertipandtrick.net/
Theme URL: http://www.premiumbloggertemplates.com/blogghiamo-blogger-template/
Date:   October 2014
License : GNU General Public License v2 or later
This template is free for both personal and commercial use, But to satisfy the 'attribution' clause of the license, you are required to keep the footer links intact which provides due credit to its authors.
----------------------------------------------- */
body#layout ul{list-style-type:none;list-style:none}
body#layout ul li{list-style-type:none;list-style:none}
body#layout #headerbwrap {height:auto;}
body#layout #content {}
/* Variable definitions
====================
*/
/* Use this with templates/template-twocol.html */
.section, .widget {
margin:0;
padding:0;
}
/*--------------------------------------------------------------
1.0 Reset
--------------------------------------------------------------*/
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
border: 0;
font-family: inherit;
font-size: 100%;
font-style: inherit;
font-weight: inherit;
margin: 0;
outline: 0;
padding: 0;
vertical-align: baseline;
}
html {
font-size: 62.5%; /* Corrects text resizing oddly in IE6/7 when body font-size is set using em units http://clagnut.com/blog/348/#c790 */
overflow-y: scroll; /* Keeps page centered in all browsers regardless of content height */
-webkit-text-size-adjust: 100%; /* Prevents iOS text size adjust after orientation change, without disabling user zoom */
-ms-text-size-adjust:     100%; /* www.456bereastreet.com/archive/201012/controlling_text_size_in_safari_for_ios_without_disabling_user_zoom/ */
}
*,
*:before,
*:after { /* apply a natural box layout model to all elements; see http://www.paulirish.com/2012/box-sizing-border-box-ftw/ */
-webkit-box-sizing: border-box; /* Not needed for modern webkit but still used by Blackberry Browser 7.0; see http://caniuse.com/#search=box-sizing */
-moz-box-sizing:    border-box; /* Still needed for Firefox 28; see http://caniuse.com/#search=box-sizing */
box-sizing:         border-box;
}
body {
background: #F0F0F0;
}
article,
aside,
details,
figcaption,
figure,
footer,
header,
main,
nav,
section {
display: block;
}
ol,
ul {
list-style: none;
}
table { /* tables still need 'cellspacing="0"' in the markup */
border-collapse: separate;
border-spacing: 0;
}
caption,
th,
td {
font-weight: normal;
text-align: left;
}
blockquote:before,
blockquote:after,
q:before,
q:after {
content: "";
}
blockquote,
q {
quotes: "" "";
}
a:focus {
outline: thin dotted;
}
a:hover,
a:active {
outline: 0;
}
a img {
border: 0;
}
/*--------------------------------------------------------------
2.0 Typography
--------------------------------------------------------------*/
body,
button,
input,
select,
textarea {
color: #404040;
font-family: 'Roboto Slab', sans-serif;
font-size: 15px;
font-size: 1.5rem;
line-height: 2;
}
.smallpartpbt {
font-size: 12px;
font-size: 1.2rem;
line-height: 1.5;
text-transform: uppercase;
}
h1,
h2,
h3,
h4,
h5,
h6 {
clear: both;
text-rendering: optimizeLegibility;
line-height: 1.3;
font-weight: 700;
}
h1 {font-size: 33px;}
h2 {font-size: 25px;}
h3 {font-size: 20px;}
h4 {font-size: 18px;}
h5 {font-size: 13px;}
h6 {font-size: 10px;}
p {
margin-bottom: 1.5em;
}
b,
strong {
font-weight: bold;
}
dfn,
cite,
em,
i {
font-style: italic;
}
blockquote {
display: block;
padding: 1.5em 1.5em 1.5em 3.5em;
margin: 0 0 1.5em;
position: relative;
border-left: 5px solid #666666;
border-right: 2px solid #666666;
}
blockquote::before {
content: "\201C";
font-size: 60px;
line-height: 1;
font-weight: bold;
position: absolute;
left: 10px;
top: 10px;
}
address {
margin: 0 0 1.5em;
}
pre {
background: #eee;
font-family: "Courier 10 Pitch", Courier, monospace;
font-size: 15px;
font-size: 1.5rem;
line-height: 1.6;
margin-bottom: 1.6em;
max-width: 100%;
overflow: auto;
padding: 1.6em;
}
code,
kbd,
tt,
var {
font: 15px Monaco, Consolas, "Andale Mono", "DejaVu Sans Mono", monospace;
}
code {
display: block;
background: rgba(0,0,0,.05);
padding: 0.5em;
text-align: left;
border-radius: 2px;
}
abbr,
acronym {
border-bottom: 1px dotted #666;
cursor: help;
}
mark,
ins {
background: #fff9c0;
text-decoration: none;
}
sup,
sub {
font-size: 75%;
height: 0;
line-height: 0;
position: relative;
vertical-align: baseline;
}
sup {
bottom: 1ex;
}
sub {
top: .5ex;
}
small {
font-size: 75%;
}
big {
font-size: 125%;
}
/*--------------------------------------------------------------
3.0 Elements
--------------------------------------------------------------*/
hr {
background-color: #ccc;
border: 0;
height: 1px;
margin-bottom: 1.5em;
}
ul,
ol {
margin: 0 0 1.5em 3em;
}
ul {
list-style: disc;
}
ol {
list-style: decimal;
}
li > ul,
li > ol {
margin-bottom: 0;
margin-left: 1.5em;
}
dt {
font-weight: bold;
}
dd {
margin: 0 1.5em 1.5em;
}
img {
height: auto; /* Make sure images are scaled correctly. */
max-width: 100%; /* Adhere to container width. */
}
figure {
margin: 0;
}
table {
margin: 0 0 1.5em;
width: 100%;
}
th {
font-weight: bold;
}
/*--------------------------------------------------------------
4.0 Forms
--------------------------------------------------------------*/
button,
input,
select,
textarea {
font-size: 100%; /* Corrects font size not being inherited in all browsers */
margin: 0; /* Addresses margins set differently in IE6/7, F3/4, S5, Chrome */
vertical-align: baseline; /* Improves appearance and consistency in all browsers */
}
button,
input[type="button"],
input[type="reset"],
input[type="submit"] {
outline: none;
border: 1px solid transparent;
border-radius: 2px;
background: #666666;
color: #ffffff;
cursor: pointer; /* Improves usability and consistency of cursor style between image-type 'input' and others */
-webkit-appearance: none; /* Corrects inability to style clickable 'input' types in iOS */
font-size: 12px;
font-size: 1.2rem;
line-height: 1.5;
text-transform: uppercase;
padding: 4px 8px;
-o-transition: all .7s ease-in-out;
-moz-transition: all .7s ease-in-out;
-webkit-transition: all .7s ease-in-out;
transition: all .7s ease-in-out;
}
button:hover,
input[type="button"]:hover,
input[type="reset"]:hover,
input[type="submit"]:hover {
border: 1px solid #666666;
color: #666666;
background: transparent;
-o-transition: all 0s ease-in-out;
-moz-transition: all 0s ease-in-out;
-webkit-transition: all 0s ease-in-out;
transition: all 0s ease-in-out;
}
input[type="checkbox"],
input[type="radio"] {
padding: 0; /* Addresses excess padding in IE8/9 */
}
input[type="search"] {
-webkit-appearance: none; /* Addresses appearance set to searchfield in S5, Chrome */
}
input[type="search"]::-webkit-search-decoration { /* Corrects inner padding displayed oddly in S5, Chrome on OSX */
-webkit-appearance: none;
}
button::-moz-focus-inner,
input::-moz-focus-inner { /* Corrects inner padding and border displayed oddly in FF3/4 www.sitepen.com/blog/2008/05/14/the-devils-in-the-details-fixing-dojos-toolbar-buttons/ */
border: 0;
padding: 0;
}
input[type="text"],
input[type="email"],
input[type="url"],
input[type="password"],
input[type="search"],
textarea {
border: 1px solid rgba(0,0,0,.05);
background: rgba(0,0,0,.05);
border-radius: 2px;
outline: none;
-o-transition: all .7s ease-in-out;
-moz-transition: all .7s ease-in-out;
-webkit-transition: all .7s ease-in-out;
transition: all .7s ease-in-out;
}
input[type="text"]:focus,
input[type="email"]:focus,
input[type="url"]:focus,
input[type="password"]:focus,
input[type="search"]:focus,
textarea:focus {
border: 1px solid #666666;
-o-transition: all 0s ease-in-out;
-moz-transition: all 0s ease-in-out;
-webkit-transition: all 0s ease-in-out;
transition: all 0s ease-in-out;
}
input[type="text"],
input[type="email"],
input[type="url"],
input[type="password"],
input[type="search"] {
padding: 4px;
}
textarea {
overflow: auto; /* Removes default vertical scrollbar in IE6/7/8/9 */
padding-left: 4px;
vertical-align: top; /* Improves readability and alignment in all browsers */
width: 100%;
}
/*--------------------------------------------------------------
5.0 Navigation
--------------------------------------------------------------*/
/*--------------------------------------------------------------
5.1 Links
--------------------------------------------------------------*/
a {
color: #404040;
text-decoration: none;
-o-transition: all .7s ease-in-out;
-moz-transition: all .7s ease-in-out;
-webkit-transition: all .7s ease-in-out;
transition: all .7s ease-in-out;
}
a:hover,
a:focus,
a:active {
color: #666666;
-o-transition: all 0s ease-in-out;
-moz-transition: all 0s ease-in-out;
-webkit-transition: all 0s ease-in-out;
transition: all 0s ease-in-out;
}
/*--------------------------------------------------------------
5.2 Menus
--------------------------------------------------------------*/
.main-navigationpbt {
clear: both;
display: block;
float: left;
width: 100%;
background: #666666;
margin-bottom: 1em;
}
.main-navigationpbt ul {
list-style: none;
margin: 0;
padding-left: 0;
}
.main-navigationpbt li {
float: left;
position: relative;
}
.main-navigationpbt li:last-child {
border-right: 0;
}
.main-navigationpbt ul li .indicator {
position: absolute;
right: 7px;
top: 28px;
font-family: 'FontAwesome';
font-size: 12px;
line-height: 1;
color: #ffffff;
}
.main-navigationpbt ul ul li .indicator {
top: 22px;
}
.main-navigationpbt ul li .indicator:before {
content: "\f0d7";
}
.main-navigationpbt ul ul li .indicator:before {
content: "\f0da";
}
.main-navigationpbt a {
display: block;
text-decoration: none;
padding: 2em;
color: #ffffff;
-o-transition: all .3s ease-in-out;
-moz-transition: all .3s ease-in-out;
-webkit-transition: all .3s ease-in-out;
transition: all .3s ease-in-out;
}
.main-navigationpbt a:hover {
color: #ffffff;
}
.main-navigationpbt ul ul {
background: #666666;
float: left;
position: absolute;
top: 5.5em;
left: auto;
z-index: 99999;
visibility:hidden;
opacity:0;
transition:visibility 0s linear 0.3s,opacity 0.3s linear;
}
.main-navigationpbt ul ul ul {
left: 100%;
top: 0;
visibility:hidden;
opacity:0;
transition:visibility 0s linear 0.3s,opacity 0.3s linear;
}
.main-navigationpbt ul ul a {
width: 200px;
padding: 1.5em;
}
.main-navigationpbt ul ul li {
}
.main-navigationpbt li:hover > a {
}
.main-navigationpbt ul ul :hover > a {
}
.main-navigationpbt ul ul a:hover {
}
.main-navigationpbt ul li:hover > ul {
visibility:visible;
opacity:1;
transition-delay:0s;
}
.main-navigationpbt ul ul li:hover > ul {
visibility:visible;
opacity:1;
transition-delay:0s;
}
.main-navigationpbt .current_page_item a,
.main-navigationpbt .current-menu-item a {
}
.main-navigationpbt ul li:hover > a, .main-navigationpbt li.current-menu-item > a, .main-navigationpbt li.current-menu-parent > a, .main-navigationpbt li.current-page-ancestor > a, .main-navigationpbt .current_page_item > a {
background: rgba(0,0,0,.03);
}
/* Small menu */
.menu-togglepbt {
display: none;
}
@media screen and (max-width: 768px) {
.menu-togglepbt,
.main-navigationpbt.toggled .nav-menu {
display: block;
}
.main-navigationpbt ul {
display: none;
}
.menu-togglepbt, .main-navigationpbt.toggled .nav-menu {
display: block;
width: 100%;
border-radius: 2px;
text-align: left;
float: left;
padding: 1.5em;
}
.main-navigationpbt.toggled .nav-menu {
padding: 0 1.5em 1.5em;
}
.main-navigationpbt.toggled .nav-menu ul {
display: block;
left: auto;
position: relative;
top: 0;
border-bottom: 0px;
padding-left: 5%;
width: 100%;
opacity: 1;
visibility: visible;
}
.main-navigationpbt.toggled ul ul a {
font-size: 100%;
width: 100%;
}
.menu-togglepbt:hover {
color: #ffffff;
}
.menu-togglepbt i {
float:right;
}
.main-navigationpbt li {
width: 100%;
}
.main-navigationpbt a {
border-bottom: 1px solid rgba(0,0,0,.05);
padding: 1.5em;
}
}
/*--------------------------------------------------------------
6.0 Accessibility
--------------------------------------------------------------*/
/* Text meant only for screen readers */
.screen-reader-textpbt {
clip: rect(1px, 1px, 1px, 1px);
position: absolute !important;
height: 1px;
width: 1px;
overflow: hidden;
}
.screen-reader-textpbt:hover,
.screen-reader-textpbt:active,
.screen-reader-textpbt:focus {
background-color: #f1f1f1;
border-radius: 3px;
box-shadow: 0 0 2px 2px rgba(0, 0, 0, 0.6);
clip: auto !important;
color: #21759b;
display: block;
font-size: 14px;
font-weight: bold;
height: auto;
left: 5px;
line-height: normal;
padding: 15px 23px 14px;
text-decoration: none;
top: 5px;
width: auto;
z-index: 100000; /* Above WP toolbar */
}
/*--------------------------------------------------------------
8.0 Clearings
--------------------------------------------------------------*/
.clearpbt:before,
.clearpbt:after,
.entry-content:before,
.entry-content:after,
.site-headerpbt:before,
.site-headerpbt:after,
.site-contentpbt:before,
.site-contentpbt:after,
.site-footerpbt:before,
.site-footerpbt:after {
content: "";
display: table;
}
.clearpbt:after,
.entry-content:after,
.site-headerpbt:after,
.site-contentpbt:after,
.site-footerpbt:after {
clear: both;
}
/*--------------------------------------------------------------
9.0 Widgets
--------------------------------------------------------------*/
.widget-areapbt .widget {
margin: 0 0 1em;
padding: 3em 1.5em;
position: relative;
}
.widget-titlepbt {
background: #666666;
margin-bottom: 1.5em;
color: #ffffff;
border-radius: 2px;
position: relative;
margin-right: -3em;
}
.widget-titlepbt:before {
content: "";
position: absolute;
border-top: 1.5em solid #666666;
border-right: 1.5em solid transparent;
right: 0;
bottom: -1.4em;
}
.widget-titlepbt:after {
content: "";
position: absolute;
border-top: 1.5em solid rgba(0,0,0,.1);
border-right: 1.5em solid transparent;
right: 0;
}
.widget-titlepbt h2 {
font-weight: 300;
padding: 8px 12px;
}
.widget-titlepbt h3 {
font-weight: 300;
padding: 8px 12px;
}
.widget-titlepbt h2, .widget-titlepbt h3, .entry-title {
letter-spacing: -1px;
text-align: center;
}
.page-title span {
font-weight: 300;
}
.widget-areapbt .widget ul {
margin: 0;
padding: 0;
list-style-type: none;
}
.widget-areapbt .widget ul li {
border-bottom: 1px solid rgba(0,0,0,.05);
padding: 0.5em 0;
}
/* Make sure select elements fit in widgets */
.widget select {
max-width: 100%;
}
/* Search widget */
.widget_search .search-submitpbt {
display: none;
}
/*--------------------------------------------------------------
10.0 Content
--------------------------------------------------------------*/
.spacerightpbt {
padding-right: 5px;
}
.spaceleftpbt {
padding-left: 5px;
}
#pagepbt {
max-width: 1140px;
margin: 2em auto;
}
.site-titlepbt {
font-size: 60px;
text-shadow: 4px 3px 0px #ffffff, 9px 8px 0px rgba(0, 0, 0, 0.1);
letter-spacing: -2px;
}
.site-descriptionpbt {
font-weight: 300;
font-size: 20px;
margin-top: 0.5em;
letter-spacing: -1px;
}
.sociallinepbt {
margin-top: 0.5em;
}
.sociallinepbt a {
padding: 0.5em;
}
.top-search.active {color: #666666;}
.topsearchformpbt {
display: none;
margin-top: 0.5em;
}
.topsearchformpbt input[type="search"] {
width: 100%;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box;
border: 0;
text-align: center;
}
.topsearchformpbt input[type="search"]:focus {
border: 0;
}
.thetoppbt {
text-align: center;
}
.thetoppbt, footer.site-footerpbt, .hentry, .widget-areapbt .widget, #totoppbt {
background: #ffffff;
-webkit-box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.05);
-moz-box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.05);
box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.05);
border-radius: 2px;
}
.thetoppbt {
padding: 3em 5em;
margin-bottom: 1em;
}
#primarypbt.content-areapbt {
float:left;
width: 70%;
padding-right: 1em;
}
#secondarypbt.widget-areapbt {
float:left;
width: 30%;
}
footer.site-footerpbt {
padding: 3em 5em;
}
.edit-linkpbt a {
background: #666666;
padding: 4px 8px;
color: #ffffff;
margin: 1px 0;
font-weight: 300;
display: inline-block;
border-radius: 2px;
border: 1px solid transparent;
-o-transition: all .7s ease-in-out;
-moz-transition: all .7s ease-in-out;
-webkit-transition: all .7s ease-in-out;
transition: all .7s ease-in-out;
}
.edit-linkpbt a:hover {
border: 1px solid #666666;
color: #666666;
background: transparent;
-o-transition: all 0s ease-in-out;
-moz-transition: all 0s ease-in-out;
-webkit-transition: all 0s ease-in-out;
transition: all 0s ease-in-out;
}
.edit-linkpbt {
display: block;
}
.entry-metapbt {
/*margin-top: 0.8em;*/
text-align: center;
}
.post-title.entry-title {
margin-bottom: 15px;
}
.entry-metapbt .spanpbt {
margin-right: 10px;
}
.site-infopbt {
text-align: center;
text-transform: none;
}
.site-infopbt a {
font-weight: 700;
}
#totoppbt:hover {
text-decoration: none;
}
#totoppbt {
display: none;
position: fixed;
bottom: 2em;
right: 1.5em;
width: 4rem;
height: 4rem;
line-height: 4rem;
text-decoration: none;
text-align: center;
cursor: pointer;
-o-transition: border .3s ease-in-out;
-moz-transition: border .3s ease-in-out;
-webkit-transition: border .3s ease-in-out;
transition: border .3s ease-in-out;
}
/*--------------------------------------------------------------
10.1 Posts and pages
--------------------------------------------------------------*/
.hentry {
margin: 0 0 1em;
padding: 2.5em 2em 2em;
}
.entry-header, .entry-footerpbt {
padding: 0 0;
}
.crestaPostStripeInner {
width: 5rem;
height: 5rem;
text-align: center;
line-height: 5rem;
position: absolute;
top: -2.5rem;
margin-left: -2.5rem;
left: 50%;
right: 50%;
background: #ffffff;
border-radius: 50%;
}
.entry-content {
margin: 1.5em 0 0;
background: #ffffff;
position: relative;
padding: 1em 0 0;
border-radius: 2px;
/*z-index: 99;*/
}
.entry-content {
border-bottom: 0px solid rgba(0,0,0,.05);
margin: 1em 0;
}
.entry-content a {
text-decoration: underline;
}
/*--------------------------------------------------------------
12.0 Media
--------------------------------------------------------------*/
/* Make sure embeds and iframes fit their containers */
embed,
iframe,
object {
max-width: 100%;
}
@media all and (max-width: 1200px) {
#pagepbt {
max-width: 985px;
}
}
@media all and (max-width: 985px) {
body {
margin: 0 1.5em;
}
#pagepbt {
max-width: 750px;
margin: 1.5em auto;
}
.widget-titlepbt {
margin-right: 0;
margin-left: 0;
}
.widget-titlepbt:before, .widget-titlepbt:after {
content: none;
}
#primarypbt.content-areapbt, #secondarypbt.widget-areapbt {
float: none;
width: 100%;
padding: 0;
}
#secondarypbt {
-webkit-column-count: 2;
-webkit-column-gap: 15px;
-moz-column-count: 2;
-moz-column-gap: 15px;
column-count: 2;
column-gap: 15px;
}
#secondarypbt .widget-areapbt .widget {
-webkit-column-break-inside: avoid;
-moz-column-break-inside: avoid;
column-break-inside: avoid;
}
.site-titlepbt {
font-size: 50px;
}
}
@media all and (max-width: 767px) {
body {
margin: 0 0.5em;
}
#pagepbt {
max-width: 445px;
margin: 0.5em auto;
}
h1 {font-size: 25px;}
h2 {font-size: 23px;}
h3 {font-size: 18px;}
h4 {font-size: 15px;}
h5 {font-size: 13px;}
h6 {font-size: 10px;}
#secondarypbt {
-webkit-column-count: auto;
-webkit-column-gap: initial;
-moz-column-count: auto;
-moz-column-gap: initial;
column-count: auto;
column-gap: initial;
}
#secondarypbt .widget-areapbt .widget {
-webkit-column-break-inside: initial;
-moz-column-break-inside: initial;
column-break-inside: initial;
}
.thetoppbt {
padding: 1.5em 0.5em;
}
.hentry, footer.site-footerpbt, .widget-areapbt .widget {
padding: 1.5em 0.5em;
}
.thetoppbt {
padding: 1.5em 0.5em;
}
.entry-content {
padding: 1em 1em 0;
}
.site-titlepbt {
font-size: 40px;
}
.sociallinepbt a {
padding: 0.3em;
}
.entry-metapbt > .spanpbt {
display: block;
}
}
@media all and (max-width: 479px) {
#pagepbt {
max-width: 297px;
}
}
h2.date-header {
margin: 10px 0px;
display: none;
}
.main .widget {
margin: 0 0 5px;
padding: 0 0 2px;
}
.main .Blog {
border-bottom-width: 0;
}
#header .description {
}
/* Comments----------------------------------------------- */
#comments {
padding:25px;
margin-bottom:20px;
background: #ffffff;
}
#comments h4 {
font-size:22px;
margin-bottom:10px;
}
.deleted-comment {
font-style: italic;
color: gray;
}
#blog-pager-newer-link {
float: left;
}
#blog-pager-older-link {
float: right;
}
#blog-pager {
text-align: center;
padding:5px;
margin: 10px 0;
}
.feed-links {
clear: both;
}
.comment-form {
}
#navbar-iframe {
height: 0;
visibility: hidden;
display: none;
}
.author-profile {
background: #f6f6f6;
border: 1px solid #eee;
margin: 5px 0 10px 0;
padding: 8px;
overflow: hidden;
}
.author-profile img {
border: 1px solid #ddd;
float: left;
margin-right: 10px;
}
.post-iconspbt {
margin: 5px 0 0 0;
padding: 0px;
}
.post-locationpbt {
margin: 5px 0;
padding: 0px;
}
.related-postbwrap {
margin: 10px auto 0;
}
.related-postbwrap h4 {
font-weight: bold;
margin: 15px 0 10px 0;
}
.related-post-style-2,.related-post-style-2 li {
list-style: none;
margin: 0;
padding: 0;
}
.related-post-style-2 li {
border-top: 0px solid #eee;
overflow: hidden;
padding: 10px 0px;
}
.related-post-style-2 li:first-child {
border-top: none;
}
.related-post-style-2 .related-post-item-thumbnail {
width: 80px;
height: 80px;
max-width: none;
max-height: none;
background-color: transparent;
border: none;
float: left;
margin: 2px 10px 0 0;
padding: 0;
}
.related-post-style-2 .related-post-item-title {
font-weight: normal;
font-size: 100%;
}
.related-post-style-2 .related-post-item-summary {
display: block;
}
.pbtsharethisbutt {
overflow: hidden;
padding: 10px 0 5px;
margin: 0;
}
.pbtsharethisbutt ul {
list-style: none;
list-style-type: none;
margin: 0;
padding: 0;
}
.pbtsharethisbutt ul li {
float: left;
margin: 0;
padding: 0;
}
.pbtsharethisbutt ul li a {
padding: 0 10px;
display: inline-block;
color: #555;
text-decoration: none;
}
.pbtsharethisbutt ul li a:hover {
color: #333;
}
.separator a[style="margin-left: 1em; margin-right: 1em;"] {margin-left: auto!important;margin-right: auto!important;}
.separator a[style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"] {clear: none !important; float: none !important; margin-bottom: 0em !important; margin-right: 0em !important;}
.separator a[style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"] img {float: left !important; margin: 0px 10px 10px 0px;}
.separator a[style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"] {clear: none !important; float: none !important; margin-bottom: 0em !important; margin-left: 0em !important;}
.separator a[style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"] img {float: right !important; margin: 0px 0px 10px 10px;}
.PopularPosts .widget-content ul li {
padding:6px 0px;
}
.reaction-buttons table{
border:none;
margin-bottom:5px;
}
.reaction-buttons table, .reaction-buttons td{
border:none !important;
}
.pbtthumbimg {
float:left;
margin:0px 10px 5px 0px;
padding:4px;
border:0px solid #eee;
background:none;
width:200px;
height:auto;
}

--></style>
<script src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/f.txt"></script><script src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/ca-pub-9452082216626643.js.tải xuống"></script><script src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/jquery.min.js.tải xuống" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[

/*! jQuery Migrate v1.2.1 | (c) 2005, 2013 jQuery Foundation, Inc. and other contributors | jquery.org/license */
jQuery.migrateMute===void 0&&(jQuery.migrateMute=!0),function(e,t,n){function r(n){var r=t.console;i[n]||(i[n]=!0,e.migrateWarnings.push(n),r&&r.warn&&!e.migrateMute&&(r.warn("JQMIGRATE: "+n),e.migrateTrace&&r.trace&&r.trace()))}function a(t,a,i,o){if(Object.defineProperty)try{return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){return r(o),i},set:function(e){r(o),i=e}}),n}catch(s){}e._definePropertyBroken=!0,t[a]=i}var i={};e.migrateWarnings=[],!e.migrateMute&&t.console&&t.console.log&&t.console.log("JQMIGRATE: Logging is active"),e.migrateTrace===n&&(e.migrateTrace=!0),e.migrateReset=function(){i={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&r("jQuery is not compatible with Quirks Mode");var o=e("<input/>",{size:1}).attr("size")&&e.attrFn,s=e.attr,u=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},c=e.attrHooks.value&&e.attrHooks.value.set||function(){return n},l=/^(?:input|button)$/i,d=/^[238]$/,p=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,f=/^(?:checked|selected)$/i;a(e,"attrFn",o||{},"jQuery.attrFn is deprecated"),e.attr=function(t,a,i,u){var c=a.toLowerCase(),g=t&&t.nodeType;return u&&(4>s.length&&r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!d.test(g)&&(o?a in o:e.isFunction(e.fn[a])))?e(t)[a](i):("type"===a&&i!==n&&l.test(t.nodeName)&&t.parentNode&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[c]&&p.test(c)&&(e.attrHooks[c]={get:function(t,r){var a,i=e.prop(t,r);return i===!0||"boolean"!=typeof i&&(a=t.getAttributeNode(r))&&a.nodeValue!==!1?r.toLowerCase():n},set:function(t,n,r){var a;return n===!1?e.removeAttr(t,r):(a=e.propFix[r]||r,a in t&&(t[a]=!0),t.setAttribute(r,r.toLowerCase())),r}},f.test(c)&&r("jQuery.fn.attr('"+c+"') may use property instead of attribute")),s.call(e,t,a,i))},e.attrHooks.value={get:function(e,t){var n=(e.nodeName||"").toLowerCase();return"button"===n?u.apply(this,arguments):("input"!==n&&"option"!==n&&r("jQuery.fn.attr('value') no longer gets properties"),t in e?e.value:null)},set:function(e,t){var a=(e.nodeName||"").toLowerCase();return"button"===a?c.apply(this,arguments):("input"!==a&&"option"!==a&&r("jQuery.fn.attr('value', val) no longer sets properties"),e.value=t,n)}};var g,h,v=e.fn.init,m=e.parseJSON,y=/^([^<]*)(<[\w\W]+>)([^>]*)$/;e.fn.init=function(t,n,a){var i;return t&&"string"==typeof t&&!e.isPlainObject(n)&&(i=y.exec(e.trim(t)))&&i[0]&&("<"!==t.charAt(0)&&r("$(html) HTML strings must start with '<' character"),i[3]&&r("$(html) HTML text after last tag is ignored"),"#"===i[0].charAt(0)&&(r("HTML string cannot start with a '#' character"),e.error("JQMIGRATE: Invalid selector string (XSS)")),n&&n.context&&(n=n.context),e.parseHTML)?v.call(this,e.parseHTML(i[2],n,!0),n,a):v.apply(this,arguments)},e.fn.init.prototype=e.fn,e.parseJSON=function(e){return e||null===e?m.apply(this,arguments):(r("jQuery.parseJSON requires a valid JSON string"),null)},e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(g=e.uaMatch(navigator.userAgent),h={},g.browser&&(h[g.browser]=!0,h.version=g.version),h.chrome?h.webkit=!0:h.webkit&&(h.safari=!0),e.browser=h),a(e,"browser",e.browser,"jQuery.browser is deprecated"),e.sub=function(){function t(e,n){return new t.fn.init(e,n)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(r,a){return a&&a instanceof e&&!(a instanceof t)&&(a=t(a)),e.fn.init.call(this,r,a,n)},t.fn.init.prototype=t.fn;var n=t(document);return r("jQuery.sub() is deprecated"),t},e.ajaxSetup({converters:{"text json":e.parseJSON}});var b=e.fn.data;e.fn.data=function(t){var a,i,o=this[0];return!o||"events"!==t||1!==arguments.length||(a=e.data(o,t),i=e._data(o,t),a!==n&&a!==i||i===n)?b.apply(this,arguments):(r("Use of jQuery.fn.data('events') is deprecated"),i)};var j=/\/(java|ecma)script/i,w=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)},e.clean||(e.clean=function(t,a,i,o){a=a||document,a=!a.nodeType&&a[0]||a,a=a.ownerDocument||a,r("jQuery.clean() is deprecated");var s,u,c,l,d=[];if(e.merge(d,e.buildFragment(t,a).childNodes),i)for(c=function(e){return!e.type||j.test(e.type)?o?o.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):n},s=0;null!=(u=d[s]);s++)e.nodeName(u,"script")&&c(u)||(i.appendChild(u),u.getElementsByTagName!==n&&(l=e.grep(e.merge([],u.getElementsByTagName("script")),c),d.splice.apply(d,[s+1,0].concat(l)),s+=l.length));return d});var Q=e.event.add,x=e.event.remove,k=e.event.trigger,N=e.fn.toggle,T=e.fn.live,M=e.fn.die,S="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",C=RegExp("\\b(?:"+S+")\\b"),H=/(?:^|\s)hover(\.\S+|)\b/,A=function(t){return"string"!=typeof t||e.event.special.hover?t:(H.test(t)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(H,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),e.event.dispatch&&a(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,n,a,i){e!==document&&C.test(t)&&r("AJAX events should be attached to document: "+t),Q.call(this,e,A(t||""),n,a,i)},e.event.remove=function(e,t,n,r,a){x.call(this,e,A(t)||"",n,r,a)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return r("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,n){if(!e.isFunction(t)||!e.isFunction(n))return N.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var a=arguments,i=t.guid||e.guid++,o=0,s=function(n){var r=(e._data(this,"lastToggle"+t.guid)||0)%o;return e._data(this,"lastToggle"+t.guid,r+1),n.preventDefault(),a[r].apply(this,arguments)||!1};for(s.guid=i;a.length>o;)a[o++].guid=i;return this.click(s)},e.fn.live=function(t,n,a){return r("jQuery.fn.live() is deprecated"),T?T.apply(this,arguments):(e(this.context).on(t,this.selector,n,a),this)},e.fn.die=function(t,n){return r("jQuery.fn.die() is deprecated"),M?M.apply(this,arguments):(e(this.context).off(t,this.selector||"**",n),this)},e.event.trigger=function(e,t,n,a){return n||C.test(e)||r("Global events are undocumented and deprecated"),k.call(this,e,t,n||document,a)},e.each(S.split("|"),function(t,n){e.event.special[n]={setup:function(){var t=this;return t!==document&&(e.event.add(document,n+"."+e.guid,function(){e.event.trigger(n,null,t,!0)}),e._data(this,n,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,n+"."+e._data(this,n)),!1}}})}(jQuery,window);

//]]>
</script>
<script type="text/javascript">
//<![CDATA[

function showrecentcomments(json){for(var i=0;i<a_rc;i++){var b_rc=json.feed.entry[i];var c_rc;if(i==json.feed.entry.length)break;for(var k=0;k<b_rc.link.length;k++){if(b_rc.link[k].rel=='alternate'){c_rc=b_rc.link[k].href;break;}}c_rc=c_rc.replace("#","#comment-");var d_rc=c_rc.split("#");d_rc=d_rc[0];var e_rc=d_rc.split("/");e_rc=e_rc[5];e_rc=e_rc.split(".html");e_rc=e_rc[0];var f_rc=e_rc.replace(/-/g," ");f_rc=f_rc.link(d_rc);var g_rc=b_rc.published.$t;var h_rc=g_rc.substring(0,4);var i_rc=g_rc.substring(5,7);var j_rc=g_rc.substring(8,10);var k_rc=new Array();k_rc[1]="Jan";k_rc[2]="Feb";k_rc[3]="Mar";k_rc[4]="Apr";k_rc[5]="May";k_rc[6]="Jun";k_rc[7]="Jul";k_rc[8]="Aug";k_rc[9]="Sep";k_rc[10]="Oct";k_rc[11]="Nov";k_rc[12]="Dec";if("content" in b_rc){var l_rc=b_rc.content.$t;}else if("summary" in b_rc){var l_rc=b_rc.summary.$t;}else var l_rc="";var re=/<\S[^>]*>/g;l_rc=l_rc.replace(re,"");if(m_rc==true)document.write('On '+k_rc[parseInt(i_rc,10)]+' '+j_rc+' ');document.write('<a href="'+c_rc+'">'+b_rc.author[0].name.$t+'</a> commented');if(n_rc==true)document.write(' on '+f_rc);document.write(': ');if(l_rc.length<o_rc){document.write('<i>&#8220;');document.write(l_rc);document.write('&#8221;</i><br/><br/>');}else{document.write('<i>&#8220;');l_rc=l_rc.substring(0,o_rc);var p_rc=l_rc.lastIndexOf(" ");l_rc=l_rc.substring(0,p_rc);document.write(l_rc+'&hellip;&#8221;</i>');document.write('<br/><br/>');}}}

function rp(json){document.write('<ul>');for(var i=0;i<numposts;i++){document.write('<li>');var entry=json.feed.entry[i];var posttitle=entry.title.$t;var posturl;if(i==json.feed.entry.length)break;for(var k=0;k<entry.link.length;k++){if(entry.link[k].rel=='alternate'){posturl=entry.link[k].href;break}}posttitle=posttitle.link(posturl);var readmorelink="(more)";readmorelink=readmorelink.link(posturl);var postdate=entry.published.$t;var cdyear=postdate.substring(0,4);var cdmonth=postdate.substring(5,7);var cdday=postdate.substring(8,10);var monthnames=new Array();monthnames[1]="Jan";monthnames[2]="Feb";monthnames[3]="Mar";monthnames[4]="Apr";monthnames[5]="May";monthnames[6]="Jun";monthnames[7]="Jul";monthnames[8]="Aug";monthnames[9]="Sep";monthnames[10]="Oct";monthnames[11]="Nov";monthnames[12]="Dec";if("content"in entry){var postcontent=entry.content.$t}else if("summary"in entry){var postcontent=entry.summary.$t}else var postcontent="";var re=/<\S[^>]*>/g;postcontent=postcontent.replace(re,"");document.write(posttitle);if(showpostdate==true)document.write(' - '+monthnames[parseInt(cdmonth,10)]+' '+cdday);if(showpostsummary==true){if(postcontent.length<numchars){document.write(postcontent)}else{postcontent=postcontent.substring(0,numchars);var quoteEnd=postcontent.lastIndexOf(" ");postcontent=postcontent.substring(0,quoteEnd);document.write(postcontent+'...'+readmorelink)}}document.write('</li>')}document.write('</ul>')}

//]]>
</script>
<script type="text/javascript">
summary_noimg = 300;
summary_img = 220;
img_thumb_height = 150;
img_thumb_width = 200; 
</script>
<script type="text/javascript">
//<![CDATA[

function removeHtmlTag(strx,chop){ 
	if(strx.indexOf("<")!=-1)
	{
		var s = strx.split("<"); 
		for(var i=0;i<s.length;i++){ 
			if(s[i].indexOf(">")!=-1){ 
				s[i] = s[i].substring(s[i].indexOf(">")+1,s[i].length); 
			} 
		} 
		strx =  s.join(""); 
	}
	chop = (chop < strx.length-1) ? chop : strx.length-2; 
	while(strx.charAt(chop-1)!=' ' && strx.indexOf(' ',chop)!=-1) chop++; 
	strx = strx.substring(0,chop-1); 
	return strx+'...'; 
}

function createSummaryAndThumb(pID){
	var div = document.getElementById(pID);
	var imgtag = "";
	var img = div.getElementsByTagName("img");
	var summ = summary_noimg;
	if(img.length>=1) {	
		imgtag = '<img src="'+img[0].src+'" class="pbtthumbimg"/>';
		summ = summary_img;
	}
	
	var summary = imgtag + '<div>' + removeHtmlTag(div.innerHTML,summ) + '</div>';
	div.innerHTML = summary;
}

//]]>
</script>
<style type="text/css">
.entry-header, .entry-content, .entry-footerpbt {padding-left:0px;padding-right:0px;}
</style>
<link href="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/authorization.css" media="all" onload="if(media!=&#39;all&#39;)media=&#39;all&#39;" rel="stylesheet"><noscript><link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=7549705215513488945&amp;zx=5be9bdb2-15f7-4b4f-b6d8-e9fc280f77b4' rel='stylesheet'/></noscript>

<script type="text/javascript" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/ESP32"></script><link rel="preload" href="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/f(1).txt" as="script"><script type="text/javascript" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/f(1).txt"></script><link rel="preload" href="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/f(2).txt" as="script"><script type="text/javascript" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/f(2).txt"></script><script type="text/javascript" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/ESP32(1)"></script></head>
<body>
<div id="pagepbt">
<a class="skip-linkpbt screen-reader-textpbt" href="http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html#contentpbt">Skip to content</a>
<header class="site-headerpbt" id="mastheadpbt" role="banner">
<div class="thetoppbt">
<div class="site-brandingpbt">
<div class="headersec section" id="headersec"><div class="widget Header" data-version="1" id="Header1">
<div id="header-inner">
<div class="titlewrapper">
<h1 class="site-titlepbt">
<a href="http://www.iotsharing.com/">IoT Sharing</a>
</h1>
</div>
<h2 class="site-descriptionpbt">
</h2>
</div>
</div></div>
</div>
<div class="sociallinepbt">
<a href="https://www.facebook.com/IoT-Sharing-301096713665166/" rel="nofollow" target="_blank" title="Facebook"><i class="fa spaceRightDouble fa-facebook"></i></a>
<a href="https://twitter.com/iotsharing" rel="nofollow" target="_blank" title="Twitter"><i class="fa spaceRightDouble fa-twitter"></i></a>
<a href="https://plus.google.com/u/0/100068993027571899198" rel="nofollow" target="_blank" title="Google Plus"><i class="fa spaceRightDouble fa-google-plus"></i></a>
<a href="https://www.youtube.com/channel/UC-wWHPC9Z-bnSnKbzej93rg" rel="nofollow" target="_blank" title="YouTube"><i class="fa spaceRightDouble fa-youtube"></i></a>
<a href="http://www.iotsharing.com/feeds/posts/default" rel="nofollow" target="_blank" title="RSS"><i class="fa spaceRightDouble fa-rss"></i></a>
<a class="top-search" href="http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html#"><i class="fa spaceRightDouble fa-search"></i></a>
</div>
<div class="topsearchformpbt">
<form action="http://www.iotsharing.com/search" id="searchformpbt" method="get" role="search">
<input name="q" placeholder="Type here and hit enter..." type="search">
</form>
</div>
</div>
<nav class="main-navigationpbt smallpartpbt" id="site-navigationpbt" role="navigation">
<button class="menu-togglepbt">Menu<i class="fa fa-align-justify"></i></button>
<div class="menu-testing-menu-container">
<ul class="menupbt nav-menu">
<li><a href="http://www.iotsharing.com/">Home</a></li>
<li><a href="https://github.com/nhatuan84">Github</a></li>
<li><a href="http://www.fossreview.com/">Teach It Yourself</a></li>
<li><a href="http://www.iotsharing.com/p/blog-page.html">About</a></li>
</ul>
</div>
</nav><!-- #site-navigation -->
</header><!-- #masthead -->
<div class="site-contentpbt" id="contentpbt">
<div class="content-areapbt" id="primarypbt">
<div class="site-mainpbt" id="mainpbt" role="main">
<div class="mainblogsec section" id="mainblogsec"><div class="widget Blog" data-version="1" id="Blog1">
<div class="blog-posts hfeed">
<!--Can't find substitution for tag [defaultAdStart]-->

          <div class="date-outer">
        
<h2 class="date-header"><span>Wednesday, May 31, 2017</span></h2>

          <div class="date-posts">
        
<div class="post-outer">
<article class="post hentry" itemprop="blogPost" itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
<a name="3256809335366798245"></a>
<header class="entry-header">
<h1 class="post-title entry-title" itemprop="name">
<a href="http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html">Why Finite State Machine (FSM) is important to Arduino ESP32</a>
</h1>
<div class="entry-metapbt smallpartpbt">
<meta content="http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html" itemprop="url"><span class="spanpbt"><a class="timestamp-link" href="http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html" rel="bookmark" title="permanent link"><i class="fa fa-calendar spacerightpbt"></i>&nbsp;<span class="published updated" itemprop="datePublished" title="2017-05-31T07:32:00-07:00">7:32 AM</span></a></span>
<i class="fa fa-user spacerightpbt"></i>&nbsp;<span class="spanpbt post-author vcard"><span class="fn" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta content="https://plus.google.com/100068993027571899198" itemprop="url"><a class="g-profile" href="https://plus.google.com/100068993027571899198" rel="author" title="author profile"><span itemprop="name">iotsharing dotcom</span></a></span></span>
<span class="spanpbt smallpartpbt"><i class="fa fa-folder-open spacerightpbt"></i>&nbsp;<a href="http://www.iotsharing.com/search/label/ESP32" rel="tag">ESP32</a></span>
<span class="spanpbt"><i class="fa fa-comments-o spacerightpbt"></i>&nbsp;<a href="https://www.blogger.com/comment.g?blogID=7549705215513488945&amp;postID=3256809335366798245" onclick="">No comments</a></span>
<span class="item-control blog-admin pid-1298951643">
<a href="https://www.blogger.com/post-edit.g?blogID=7549705215513488945&amp;postID=3256809335366798245&amp;from=pencil" title="Edit Post">
<img alt="" class="icon-action" height="18" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/icon18_edit_allbkg.gif" width="18">
</a>
</span>
</div>
</header>
<div class="post-header-line-1"></div>
<div class="post-body entry-content" id="post-body-3256809335366798245" itemprop="articleBody">
<div dir="ltr" style="text-align: left;" trbidi="on">
<b>1. Introduction </b><br>
- Arduino ESP32 core is built over FreeRTOS. If you look into the cores/esp32 folder you will see a file called "main.cpp" with code:<br>
<div style="background: #ffffff; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;">
<table><tbody>
<tr><td><pre style="line-height: 125%; margin: 0;"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre>
</td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #557799;">#include "freertos/FreeRTOS.h"</span>
<span style="color: #557799;">#include "freertos/task.h"</span>
<span style="color: #557799;">#include "Arduino.h"</span>

<span style="color: #557799;">#if CONFIG_AUTOSTART_ARDUINO</span>

<span style="color: #557799;">#if CONFIG_FREERTOS_UNICORE</span>
<span style="color: #557799;">#define ARDUINO_RUNNING_CORE 0</span>
<span style="color: #557799;">#else</span>
<span style="color: #557799;">#define ARDUINO_RUNNING_CORE 1</span>
<span style="color: #557799;">#endif</span>

<span style="color: #333399; font-weight: bold;">void</span> <span style="color: #0066bb; font-weight: bold;">loopTask</span>(<span style="color: #333399; font-weight: bold;">void</span> <span style="color: #333333;">*</span>pvParameters)
{
    setup();
    <span style="color: #008800; font-weight: bold;">for</span>(;;) {
        micros(); <span style="color: #888888;">//update overflow</span>
        loop();
    }
}

<span style="color: #008800; font-weight: bold;">extern</span> <span style="background-color: #fff0f0;">"C"</span> <span style="color: #333399; font-weight: bold;">void</span> app_main()
{
    initArduino();
    xTaskCreatePinnedToCore(loopTask, <span style="background-color: #fff0f0;">"loopTask"</span>, <span style="color: #0000dd; font-weight: bold;">4096</span>, <span style="color: #007020;">NULL</span>, <span style="color: #0000dd; font-weight: bold;">1</span>, <span style="color: #007020;">NULL</span>, ARDUINO_RUNNING_CORE);
}

<span style="color: #557799;">#endif</span>
</pre>
</td></tr>
</tbody></table>
</div>
- Here you can see our Arduino program is just a task of FreeRTOS. When the task is invoked it will invoke “setup()” function and then invoke the “loop()” in an infinite loop.<br>
&nbsp;- We only have one task so we can only execute one job. Suppose that we implement an application that have 2 jobs:<br>
+ job A to scan the input from keyboard.<br>
+ job B to send a message and wait for response.<br>
Our implementation:<br>
<b> </b><br>
<div style="background: #ffffff; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;">
<table><tbody>
<tr><td><pre style="line-height: 125%; margin: 0;">1
2
3
4
5
6
7
8
9</pre>
</td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #333399; font-weight: bold;">void</span> <span style="color: #0066bb; font-weight: bold;">loop</span>(){
 jobA_scan_the_keyboard();
 jobB_send_message();
 <span style="color: #008800; font-weight: bold;">while</span>(<span style="color: #0000dd; font-weight: bold;">1</span>){
  <span style="color: #008800; font-weight: bold;">if</span>(jobB_get_response()){
   <span style="color: #008800; font-weight: bold;">break</span>;
  }
 }
}
</pre>
</td></tr>
</tbody></table>
</div>
If job B takes long time to finish, it will block job A. So job A may miss some keyboard pressing event. It is not a good design.<br>
<b>2. How to apply Finite State Machine (FSM)</b><br>
- In order to overcome this we will use a method called Finite State Machine. The purpose of this method is to divide a machine into a collection of states. At a specific time, only one state is active and in each state the machine just executes a specific action. After finishing that action, it may transit to another state to execute another action. For example: we have a lighting system. It can have 3 states: ON, OFF, IDLE. Its normal state is IDLE and waiting for trigger to change state ON or OFF and then back to IDLE.<br>
<b>Note</b>: people often implement Finite State Machine using <b>switch/case</b> structure.<br>
- Back to the example above we can re-implement the application like below:<br>
<div style="background: #ffffff; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;">
<table><tbody>
<tr><td><pre style="line-height: 125%; margin: 0;"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre>
</td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #333399; font-weight: bold;">void</span> <span style="color: #0066bb; font-weight: bold;">loop</span>(){
 jobA_scan_the_keyboard();
 <span style="color: #008800; font-weight: bold;">switch</span>(jobB_state){
  <span style="color: #008800; font-weight: bold;">case</span> SEND_MESSAGE:
   jobB_send_message();
   jobB_state <span style="color: #333333;">=</span> WAIT_FOR_RESPONSE;
   <span style="color: #008800; font-weight: bold;">break</span>;
  <span style="color: #008800; font-weight: bold;">case</span> WAIT_FOR_RESPONSE:
   <span style="color: #008800; font-weight: bold;">if</span>(jobB_get_response()){
    jobB_state <span style="color: #333333;">=</span> IDLE;
    <span style="color: #008800; font-weight: bold;">break</span>;
   }
  <span style="color: #008800; font-weight: bold;">case</span> IDLE:
   <span style="color: #008800; font-weight: bold;">if</span>(need_send_message){
                jobB_state <span style="color: #333333;">=</span> SEND_MESSAGE;
                <span style="color: #008800; font-weight: bold;">break</span>;
            }
        <span style="color: #008800; font-weight: bold;">case</span> <span style="color: #008800; font-weight: bold;">default</span>:
            <span style="color: #008800; font-weight: bold;">break</span>;
    }
}
</pre>
</td></tr>
</tbody></table>
</div>
- Here jobB is divided into 3 states: SEND_MESSAGE, WAIT_FOR_RESPONSE and IDLE. jobB executes a specific action according to its state in every cycle and do not block jobA anymore. Each job has a chance to execute itself in every cycle, look like multitasking.<br>
- I applied this method in <a href="http://www.iotsharing.com/2017/05/how-to-build-system-to-update-price-tag.html" target="_blank">Demo 15: How to build a system to update Price Tag automatically using Arduino ESP32</a><br>
<div style="background: #ffffff; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;">
<table><tbody>
<tr><td><pre style="line-height: 125%; margin: 0;"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre>
</td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #333399; font-weight: bold;">void</span> <span style="color: #0066bb; font-weight: bold;">loop</span>() {
  <span style="color: #888888;">/* if client was disconnected then try to reconnect again */</span>
  <span style="color: #008800; font-weight: bold;">if</span> (<span style="color: #333333;">!</span>client.connected()) {
    mqttconnect();
  }
  <span style="color: #888888;">/* this function will listen for incomming </span>
<span style="color: #888888;">  subscribed topic-process-invoke receivedCallback */</span>
  client.loop();
  <span style="color: #888888;">/* because OLED waste time </span>
<span style="color: #888888;">  so we use state machine to display </span>
<span style="color: #888888;">  step by step every loop */</span>
  <span style="color: #008800; font-weight: bold;">switch</span>(dispState)
  {
    <span style="color: #008800; font-weight: bold;">case</span> <span style="color: #0000dd; font-weight: bold;">1</span>:
    display.clearDisplay();
    dispState <span style="color: #333333;">=</span> <span style="color: #0000dd; font-weight: bold;">2</span>;
    <span style="color: #008800; font-weight: bold;">break</span>;
    <span style="color: #008800; font-weight: bold;">case</span> <span style="color: #0000dd; font-weight: bold;">2</span>:
    display.setCursor(<span style="color: #0000dd; font-weight: bold;">2</span>,<span style="color: #0000dd; font-weight: bold;">2</span>);
    dispState <span style="color: #333333;">=</span> <span style="color: #0000dd; font-weight: bold;">3</span>;
    <span style="color: #008800; font-weight: bold;">break</span>;
    <span style="color: #008800; font-weight: bold;">case</span> <span style="color: #0000dd; font-weight: bold;">3</span>:
    display.println((<span style="color: #333399; font-weight: bold;">char</span> <span style="color: #333333;">*</span>)rec);
    dispState <span style="color: #333333;">=</span> <span style="color: #0000dd; font-weight: bold;">4</span>;
    <span style="color: #008800; font-weight: bold;">break</span>;
    <span style="color: #008800; font-weight: bold;">case</span> <span style="color: #0000dd; font-weight: bold;">4</span>:
    display.setCursor(<span style="color: #0000dd; font-weight: bold;">2</span>,<span style="color: #0000dd; font-weight: bold;">22</span>);
    dispState <span style="color: #333333;">=</span> <span style="color: #0000dd; font-weight: bold;">5</span>;
    <span style="color: #008800; font-weight: bold;">break</span>;
    <span style="color: #008800; font-weight: bold;">case</span> <span style="color: #0000dd; font-weight: bold;">5</span>:
    display.println((<span style="color: #333399; font-weight: bold;">char</span> <span style="color: #333333;">*</span>)<span style="color: #333333;">&amp;</span>amp;rec[separate]);
    dispState <span style="color: #333333;">=</span> <span style="color: #0000dd; font-weight: bold;">6</span>;
    <span style="color: #008800; font-weight: bold;">break</span>;
    <span style="color: #008800; font-weight: bold;">case</span> <span style="color: #0000dd; font-weight: bold;">6</span>:
    display.display();
    dispState <span style="color: #333333;">=</span> <span style="color: #0000dd; font-weight: bold;">0</span>;
    memset(rec, <span style="color: #0000dd; font-weight: bold;">0</span>, BUF_SIZE);
    <span style="color: #008800; font-weight: bold;">break</span>;
    <span style="color: #997700; font-weight: bold;">default:</span>
    <span style="color: #008800; font-weight: bold;">break</span>;
  }
} 
</pre>
</td></tr>
</tbody></table>
</div>
You can see in the code to display the received message on OLED, I used the <b>switch/case</b> structure, it is a style of FSM and it has states 1,2,3,4,5,6 but I did not mention the detail name of states since I just apply it to <b>avoid blocking</b>. Certainly we can apply it to make the program well-organized and easy to maintain. I will take one more example:<br>
In <a href="http://www.iotsharing.com/2017/05/how-to-use-mqtt-to-build-smart-home-arduino-esp32.html" target="_blank">Demo 14: How to use MQTT and Arduino ESP32 to build a simple Smart home system . </a><br>
The loop() function have 2 jobs: MQTT handler and DHT temperature measure. In the old code we use counter:<br>
<div style="background: #ffffff; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;">
<table><tbody>
<tr><td><pre style="line-height: 125%; margin: 0;"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre>
</td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #333399; font-weight: bold;">void</span> <span style="color: #0066bb; font-weight: bold;">loop</span>() {
  <span style="color: #888888;">/* if client was disconnected then try to reconnect again */</span>
  <span style="color: #008800; font-weight: bold;">if</span> (<span style="color: #333333;">!</span>client.connected()) {
    mqttconnect();
  }
  <span style="color: #888888;">/* this function will listen for incomming </span>
<span style="color: #888888;">  subscribed topic-process-invoke receivedCallback */</span>
  client.loop();
  <span style="color: #888888;">/* we measure temperature every 3 secs</span>
<span style="color: #888888;">  we count until 3 secs reached to avoid blocking program if using delay()*/</span>
  <span style="color: #333399; font-weight: bold;">long</span> now <span style="color: #333333;">=</span> millis();
  <span style="color: #008800; font-weight: bold;">if</span> (now <span style="color: #333333;">-</span> lastMsg <span style="color: #333333;">&gt;</span> <span style="color: #0000dd; font-weight: bold;">3000</span>) {
    lastMsg <span style="color: #333333;">=</span> now;
    <span style="color: #888888;">/* read DHT11/DHT22 sensor and convert to string */</span>
    temperature <span style="color: #333333;">=</span> dht.readTemperature();
    <span style="color: #008800; font-weight: bold;">if</span> (<span style="color: #333333;">!</span>isnan(temperature)) {
      snprintf (msg, <span style="color: #0000dd; font-weight: bold;">20</span>, <span style="background-color: #fff0f0;">"%lf"</span>, temperature);
      <span style="color: #888888;">/* publish the message */</span>
      client.publish(TEMP_TOPIC, msg);
    }
  }
}
</pre>
</td></tr>
</tbody></table>
</div>
Applying Finite State Machine, we can implement like below:<br>
<!-- HTML generated using hilite.me --><br>
<div style="background: #ffffff; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;">
<table><tbody>
<tr><td><pre style="line-height: 125%; margin: 0;"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre>
</td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #888888;">/* these are available states of DHT */</span>
<span style="color: #008800; font-weight: bold;">typedef</span> <span style="color: #008800; font-weight: bold;">enum</span> {
    <span style="color: #888888;">/* wait until 3 seconds */</span>
    WAIT_FOR_TIMEOUT <span style="color: #333333;">=</span> <span style="color: #0000dd; font-weight: bold;">1</span>,
    <span style="color: #888888;">/* read DHT sensor for temperature */</span>
    START_MEASURE,
    <span style="color: #888888;">/* publish MQTT topic temperature */</span>
    PUBLISH_MEASURE
} DHT_State;

<span style="color: #888888;">/* create a variable to hold current state of DHT */</span>
DHT_State state <span style="color: #333333;">=</span> WAIT_FOR_TIMEOUT;

<span style="color: #333399; font-weight: bold;">void</span> <span style="color: #0066bb; font-weight: bold;">loop</span>() {
  <span style="color: #888888;">/* if client was disconnected then try to reconnect again */</span>
  <span style="color: #008800; font-weight: bold;">if</span> (<span style="color: #333333;">!</span>client.connected()) {
    mqttconnect();
  }
  <span style="color: #888888;">/* this function will listen for incomming </span>
<span style="color: #888888;">  subscribed topic-process-invoke receivedCallback */</span>
  client.loop();
  
    <span style="color: #888888;">/* we measure temperature every 3 secs</span>
<span style="color: #888888;">  this code is to avoid blocking program </span>
<span style="color: #888888;">  and easy to read maintain when using FinitSate Machine */</span>
  <span style="color: #008800; font-weight: bold;">switch</span>(state){
    <span style="color: #008800; font-weight: bold;">case</span> WAIT_FOR_TIMEOUT:
        <span style="color: #333399; font-weight: bold;">long</span> now <span style="color: #333333;">=</span> millis();
        <span style="color: #008800; font-weight: bold;">if</span> (now <span style="color: #333333;">-</span> lastMsg <span style="color: #333333;">&gt;</span> <span style="color: #0000dd; font-weight: bold;">3000</span>) {
            state <span style="color: #333333;">=</span> START_MEASURE;
        }
        <span style="color: #008800; font-weight: bold;">break</span>;
    <span style="color: #008800; font-weight: bold;">case</span> START_MEASURE:
        temperature <span style="color: #333333;">=</span> dht.readTemperature();
        <span style="color: #008800; font-weight: bold;">if</span> (<span style="color: #333333;">!</span>isnan(temperature)) {
            snprintf (msg, <span style="color: #0000dd; font-weight: bold;">20</span>, <span style="background-color: #fff0f0;">"%lf"</span>, temperature);
            state <span style="color: #333333;">=</span> PUBLISH_MEASURE;
        }
        <span style="color: #008800; font-weight: bold;">break</span>;
    <span style="color: #008800; font-weight: bold;">case</span> PUBLISH_MEASURE:
        <span style="color: #888888;">/* publish the message */</span>
        client.publish(TEMP_TOPIC, msg);
        lastMsg <span style="color: #333333;">=</span> now;
        state <span style="color: #333333;">=</span> WAIT_FOR_TIMEOUT;
        <span style="color: #008800; font-weight: bold;">break</span>;
  }
}
</pre>
</td></tr>
</tbody></table>
</div>
</div>
<div style="clear: both;"></div>
<div class="pbtsharethisbutt">
<ul class="pbt-social-icons" id="social-post-un">
<li class="Share-this-arti">Share This:&nbsp;&nbsp;</li>
<li class="pbtfacebook"><a href="http://www.facebook.com/share.php?v=4&amp;src=bm&amp;u=http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html&amp;t=Why%20Finite%20State%20Machine%20(FSM)%20is%20important%20to%20Arduino%20ESP32" onclick="window.open(this.href,&quot;sharer&quot;,&quot;toolbar=0,status=0,width=626,height=436&quot;); return false;" rel="nofollow" target="_blank" title="Share this on Facebook"><i class="fa fa-facebook-square"></i>&nbsp;Facebook</a></li><li class="pbttwitter"><a href="http://twitter.com/home?status=Why%20Finite%20State%20Machine%20(FSM)%20is%20important%20to%20Arduino%20ESP32%20--%20http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html" rel="nofollow" target="_blank" title="Tweet This!"><i class="fa fa-twitter-square"></i>&nbsp;Twitter</a></li><li class="pbtgoogle"><a href="https://plus.google.com/share?url=http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html" onclick="javascript:window.open(this.href,   &quot;&quot;, &quot;menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600&quot;);return false;" rel="nofollow" target="_blank" title="Share this on Google+"><i class="fa fa-google-plus-square"></i>&nbsp;Google+</a></li><li class="pbtstumbleupon"><a href="http://www.stumbleupon.com/submit?url=http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html&amp;title=Why%20Finite%20State%20Machine%20(FSM)%20is%20important%20to%20Arduino%20ESP32" rel="nofollow" target="_blank" title="Stumble upon something good? Share it on StumbleUpon"><i class="fa fa-stumbleupon-circle"></i>&nbsp;Stumble</a></li><li class="pbtdigg"><a href="http://digg.com/submit?phase=2&amp;url=http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html&amp;title=Why%20Finite%20State%20Machine%20(FSM)%20is%20important%20to%20Arduino%20ESP32" rel="nofollow" target="_blank" title="Digg this!"><i class="fa fa-digg"></i>&nbsp;Digg</a></li>
</ul>
</div>
<div style="clear: both;"></div>
</div>
<div class="post-iconspbt">
<span class="post-icons" style="padding-right:10px;">
</span>
<div class="post-share-buttons goog-inline-block">
<a class="goog-inline-block share-button sb-email" href="https://www.blogger.com/share-post.g?blogID=7549705215513488945&amp;postID=3256809335366798245&amp;target=email" target="_blank" title="Email This"><span class="share-button-link-text">Email This</span></a><a class="goog-inline-block share-button sb-blog" href="https://www.blogger.com/share-post.g?blogID=7549705215513488945&amp;postID=3256809335366798245&amp;target=blog" onclick="window.open(this.href, &quot;_blank&quot;, &quot;height=270,width=475&quot;); return false;" target="_blank" title="BlogThis!"><span class="share-button-link-text">BlogThis!</span></a><a class="goog-inline-block share-button sb-twitter" href="https://www.blogger.com/share-post.g?blogID=7549705215513488945&amp;postID=3256809335366798245&amp;target=twitter" target="_blank" title="Share to Twitter"><span class="share-button-link-text">Share to Twitter</span></a><a class="goog-inline-block share-button sb-facebook" href="https://www.blogger.com/share-post.g?blogID=7549705215513488945&amp;postID=3256809335366798245&amp;target=facebook" onclick="window.open(this.href, &quot;_blank&quot;, &quot;height=430,width=640&quot;); return false;" target="_blank" title="Share to Facebook"><span class="share-button-link-text">Share to Facebook</span></a><div class="goog-inline-block dummy-container"><g:plusone source="blogger:blog:plusone" href="http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html" size="medium" width="300" annotation="inline"></g:plusone></div>
</div>
<div style="clear: both;"></div>
</div>
<div class="post-location post-locationpbt">
</div>
<div class="related-postbwrap" id="bpostrelated-post"><h4>Related Posts:</h4><ul class="related-post-style-2"><li><img alt="" class="related-post-item-thumbnail" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/led2.png" width="80" height="80"><a class="related-post-item-title" title="Demo 22: How to use Timer interrupt in Arduino ESP32" href="http://www.iotsharing.com/2017/06/how-to-use-interrupt-timer-in-arduino-esp32.html">Demo 22: How to use Timer interrupt in Arduino ESP32</a><span class="related-post-item-summary"><span class="related-post-item-summary-text">
1. Introduction
- In blinky demo we use delay() function to make the LED blink. In this demo we will replcae delay() function by using Timer (this is…</span> <a href="http://www.iotsharing.com/2017/06/how-to-use-interrupt-timer-in-arduino-esp32.html" class="related-post-item-more">Read More</a></span><span style="display:block;clear:both;"></span></li><li><img alt="" class="related-post-item-thumbnail" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/ap1.png" width="80" height="80"><a class="related-post-item-title" title="Demo 10: How to turn the Arduino ESP32 into an Access Point" href="http://www.iotsharing.com/2017/05/how-to-turn-esp32-into-access-point.html">Demo 10: How to turn the Arduino ESP32 into an Access Point</a><span class="related-post-item-summary"><span class="related-post-item-summary-text">

1. Introduction

All the previous demonstrations which are related to WiFi, ESP32 operate in Station mode in which ESP32 will become a client of a W…</span> <a href="http://www.iotsharing.com/2017/05/how-to-turn-esp32-into-access-point.html" class="related-post-item-more">Read More</a></span><span style="display:block;clear:both;"></span></li><li><img alt="" class="related-post-item-thumbnail" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/internet15.png" width="80" height="80"><a class="related-post-item-title" title="Demo 9: How to use mDNS to resolve host names to Arduino ESP32 IP addresses" href="http://www.iotsharing.com/2017/05/how-to-use-mdns-to-resolve-hostname-esp32-ipaddress.html">Demo 9: How to use mDNS to resolve host names to Arduino ESP32 IP addresses</a><span class="related-post-item-summary"><span class="related-post-item-summary-text">
1. Introduction

- Just imagine the situation, there is a network and your ESP32 is in that network. Now you want to communicate with ESP32, so you n…</span> <a href="http://www.iotsharing.com/2017/05/how-to-use-mdns-to-resolve-hostname-esp32-ipaddress.html" class="related-post-item-more">Read More</a></span><span style="display:block;clear:both;"></span></li><li><img alt="" class="related-post-item-thumbnail" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/esp32preferences.png" width="80" height="80"><a class="related-post-item-title" title="Demo 23: How to use Preferences to backup Arduino ESP32 data in main flash memory when power is off" href="http://www.iotsharing.com/2017/06/how-to-use-preferences-to-backup-data-in-main-flash-when-power-off.html">Demo 23: How to use Preferences to backup Arduino ESP32 data in main flash memory when power is off</a><span class="related-post-item-summary"><span class="related-post-item-summary-text">
1. Introduction
- This library use a portion of main flash memory to store data (beside this way we can use sdcard to store data Demo 7: How to use A…</span> <a href="http://www.iotsharing.com/2017/06/how-to-use-preferences-to-backup-data-in-main-flash-when-power-off.html" class="related-post-item-more">Read More</a></span><span style="display:block;clear:both;"></span></li><li><img alt="" class="related-post-item-thumbnail" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/esp32task_param.png" width="80" height="80"><a class="related-post-item-title" title="Arduino ESP32 FreeRTOS 2: How to use Task Parameter - Task Priorities - Task Handle - Idle Task Hook" href="http://www.iotsharing.com/2017/06/arduino-esp32-freertos-how-to-use-task-param-task-priority-task-handle.html">Arduino ESP32 FreeRTOS 2: How to use Task Parameter - Task Priorities - Task Handle - Idle Task Hook</a><span class="related-post-item-summary"><span class="related-post-item-summary-text">
1. Introduction
- In order to create a task in FreeRTOS, we use this API below. It has some parameters that we knew in Arduino ESP32 FreeRTOS 1. In t…</span> <a href="http://www.iotsharing.com/2017/06/arduino-esp32-freertos-how-to-use-task-param-task-priority-task-handle.html" class="related-post-item-more">Read More</a></span><span style="display:block;clear:both;"></span></li></ul><span style="display:block;clear:both;"></span></div>
<div style="clear: both;"></div>
<script type="text/javascript">
var labelArray = [
          "ESP32"
      ];
var relatedPostConfig = {
      homePage: "http://www.iotsharing.com/",
      widgetTitle: "<h4>Related Posts:</h4>",
      numPosts: 5,
      summaryLength: 150,
      titleLength: "auto",
      thumbnailSize: 80,
      noImage: "http://1.bp.blogspot.com/-Xakmg4CGXnA/Uw_8uqsGlwI/AAAAAAAALjg/AdRZNmOJpIA/s1600/no-img.png",
      containerId: "bpostrelated-post",
      newTabLink: false,
      moreText: "Read More",
      widgetStyle: 2,
      callBack: function() {}
};
</script>
<script type="text/javascript">
//<![CDATA[

/*! Related Post Widget for Blogger by Taufik Nurrohman => http://gplus.to/tovic */
var randomRelatedIndex,showRelatedPost;(function(n,m,k){var d={widgetTitle:"<h4>Artikel Terkait:</h4>",widgetStyle:1,homePage:"http://www.dte.web.id",numPosts:7,summaryLength:370,titleLength:"auto",thumbnailSize:72,noImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAA3NCSVQICAjb4U/gAAAADElEQVQImWOor68HAAL+AX7vOF2TAAAAAElFTkSuQmCC",containerId:"related-post",newTabLink:false,moreText:"Baca Selengkapnya",callBack:function(){}};for(var f in relatedPostConfig){d[f]=(relatedPostConfig[f]=="undefined")?d[f]:relatedPostConfig[f]}var j=function(a){var b=m.createElement("script");b.type="text/javascript";b.src=a;k.appendChild(b)},o=function(b,a){return Math.floor(Math.random()*(a-b+1))+b},l=function(a){var p=a.length,c,b;if(p===0){return false}while(--p){c=Math.floor(Math.random()*(p+1));b=a[p];a[p]=a[c];a[c]=b}return a},e=(typeof labelArray=="object"&&labelArray.length>0)?"/-/"+l(labelArray)[0]:"",h=function(b){var c=b.feed.openSearch$totalResults.$t-d.numPosts,a=o(1,(c>0?c:1));j(d.homePage.replace(/\/$/,"")+"/feeds/posts/summary"+e+"?alt=json-in-script&orderby=updated&start-index="+a+"&max-results="+d.numPosts+"&callback=showRelatedPost")},g=function(z){var s=document.getElementById(d.containerId),x=l(z.feed.entry),A=d.widgetStyle,c=d.widgetTitle+'<ul class="related-post-style-'+A+'">',b=d.newTabLink?' target="_blank"':"",y='<span style="display:block;clear:both;"></span>',v,t,w,r,u;if(!s){return}for(var q=0;q<d.numPosts;q++){if(q==x.length){break}t=x[q].title.$t;w=(d.titleLength!=="auto"&&d.titleLength<t.length)?t.substring(0,d.titleLength)+"&hellip;":t;r=("media$thumbnail" in x[q]&&d.thumbnailSize!==false)?x[q].media$thumbnail.url.replace(/\/s[0-9]+(\-c)?/,"/s"+d.thumbnailSize+"-c"):d.noImage;u=("summary" in x[q]&&d.summaryLength>0)?x[q].summary.$t.replace(/<br ?\/?>/g," ").replace(/<.*?>/g,"").replace(/[<>]/g,"").substring(0,d.summaryLength)+"&hellip;":"";for(var p=0,a=x[q].link.length;p<a;p++){v=(x[q].link[p].rel=="alternate")?x[q].link[p].href:"#"}if(A==2){c+='<li><img alt="" class="related-post-item-thumbnail" src="'+r+'" width="'+d.thumbnailSize+'" height="'+d.thumbnailSize+'"><a class="related-post-item-title" title="'+t+'" href="'+v+'"'+b+">"+w+'</a><span class="related-post-item-summary"><span class="related-post-item-summary-text">'+u+'</span> <a href="'+v+'" class="related-post-item-more"'+b+">"+d.moreText+"</a></span>"+y+"</li>"}else{if(A==3||A==4){c+='<li class="related-post-item" tabindex="0"><a class="related-post-item-title" href="'+v+'"'+b+'><img alt="" class="related-post-item-thumbnail" src="'+r+'" width="'+d.thumbnailSize+'" height="'+d.thumbnailSize+'"></a><div class="related-post-item-tooltip"><a class="related-post-item-title" title="'+t+'" href="'+v+'"'+b+">"+w+"</a></div>"+y+"</li>"}else{if(A==5){c+='<li class="related-post-item" tabindex="0"><a class="related-post-item-wrapper" href="'+v+'" title="'+t+'"'+b+'><img alt="" class="related-post-item-thumbnail" src="'+r+'" width="'+d.thumbnailSize+'" height="'+d.thumbnailSize+'"><span class="related-post-item-tooltip">'+w+"</span></a>"+y+"</li>"}else{if(A==6){c+='<li><a class="related-post-item-title" title="'+t+'" href="'+v+'"'+b+">"+w+'</a><div class="related-post-item-tooltip"><img alt="" class="related-post-item-thumbnail" src="'+r+'" width="'+d.thumbnailSize+'" height="'+d.thumbnailSize+'"><span class="related-post-item-summary"><span class="related-post-item-summary-text">'+u+"</span></span>"+y+"</div></li>"}else{c+='<li><a title="'+t+'" href="'+v+'"'+b+">"+w+"</a></li>"}}}}}s.innerHTML=c+="</ul>"+y;d.callBack()};randomRelatedIndex=h;showRelatedPost=g;j(d.homePage.replace(/\/$/,"")+"/feeds/posts/summary"+e+"?alt=json-in-script&orderby=updated&max-results=0&callback=randomRelatedIndex")})(window,document,document.getElementsByTagName("head")[0]);

//]]>
</script>
</article>
<div style="clear: both;"></div>
<div class="blog-pager" id="blog-pager">
<span id="blog-pager-newer-link">
<a class="blog-pager-newer-link" href="http://www.iotsharing.com/2017/06/how-to-turn-the-Orange-Pi-into-an-IoT-node.html" id="Blog1_blog-pager-newer-link" title="Newer Post">Newer Post</a>
</span>
<span id="blog-pager-older-link">
<a class="blog-pager-older-link" href="http://www.iotsharing.com/2017/05/how-to-update-firmware-ota-for-batch-esp32.html" id="Blog1_blog-pager-older-link" title="Older Post">Older Post</a>
</span>
<a class="home-link" href="http://www.iotsharing.com/">Home</a>
</div>
<div class="clear"></div>
<div class="comments" id="comments">
<a name="comments"></a>
<h4>
0
comments:
        
</h4>
<div id="Blog1_comments-block-wrapper">
<dl class="avatar-comment-indent" id="comments-block">
</dl>
</div>
<p class="comment-footer">
<a href="https://www.blogger.com/comment.g?blogID=7549705215513488945&amp;postID=3256809335366798245" onclick="">Post a Comment</a>
</p>
<div id="backlinks-container">
<div id="Blog1_backlinks-container">
</div>
</div>
</div>
</div>

        </div></div>
      
<!--Can't find substitution for tag [adEnd]-->
</div>
<div style="clear: both;"></div>
<script type="text/javascript">window.___gcfg = {'lang': 'en'};</script>
</div></div>
</div><!-- #main -->
</div><!-- #primary -->
<div class="widget-areapbt" id="secondarypbt" role="complementary">
<div class="widget widget_search">
<form action="http://www.iotsharing.com/search" class="search-form" method="get" role="search">
<label>
<span class="screen-reader-textpbt">Search for:</span>
<input class="search-field" name="q" placeholder="Search" title="Search for:" type="search" value="">
</label>
<input class="search-submit" type="submit" value="Search">
</form>
</div>
<div class="sidebarrightpbt section" id="sidebarrightpbt"><div class="widget Text" data-version="1" id="Text1">
<div class="widget-titlepbt"><h2 class="title">Tutorials</h2></div>
<div class="widget-content">
<div data-contents="true"><div class="" data-block="true" data-editor="98d8" data-offset-key="tl9n-0-0"><div class="_1mf _1mj" data-offset-key="3abnv-0-0"><span data-offset-key="3abnv-0-0"><span data-text="true"><a href="http://www.iotsharing.com/2017/08/esp32-tutorials.html">ESP32 tutorials</a><br></span></span></div></div></div><br><div data-contents="true"><div class="" data-block="true" data-editor="98d8" data-offset-key="tl9n-0-0"><div class="_1mf _1mj" data-offset-key="3abnv-0-0"><span data-offset-key="3abnv-0-0"><span data-text="true"><a href="http://www.iotsharing.com/2017/08/esp32-tutorials.html">Arduino ESP32 FreeRTOS tutorials</a><br></span></span></div></div></div><br>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=7549705215513488945&amp;widgetType=Text&amp;widgetId=Text1&amp;action=editWidget&amp;sectionId=sidebarrightpbt" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Text1&quot;));" target="configText1" title="Edit">
<img alt="" height="18" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div><div class="widget Label" data-version="1" id="Label1">
<div class="widget-titlepbt"><h2>Topics</h2></div>
<div class="widget-content cloud-label-widget-content">
<span class="label-size label-size-2">
<a dir="ltr" href="http://www.iotsharing.com/search/label/apache">apache</a>
<span class="label-count" dir="ltr">(3)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://www.iotsharing.com/search/label/Backend">Backend</a>
<span class="label-count" dir="ltr">(9)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://www.iotsharing.com/search/label/CAN%20protocol">CAN protocol</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://www.iotsharing.com/search/label/chatbot">chatbot</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-5">
<a dir="ltr" href="http://www.iotsharing.com/search/label/ESP32">ESP32</a>
<span class="label-count" dir="ltr">(52)</span>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="http://www.iotsharing.com/search/label/ESP8266">ESP8266</a>
<span class="label-count" dir="ltr">(24)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://www.iotsharing.com/search/label/facebook%20messenger">facebook messenger</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://www.iotsharing.com/search/label/fota">fota</a>
<span class="label-count" dir="ltr">(3)</span>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="http://www.iotsharing.com/search/label/FreeRTOS">FreeRTOS</a>
<span class="label-count" dir="ltr">(18)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://www.iotsharing.com/search/label/http">http</a>
<span class="label-count" dir="ltr">(3)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://www.iotsharing.com/search/label/ibm%20watson">ibm watson</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://www.iotsharing.com/search/label/iot%20dashboard">iot dashboard</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://www.iotsharing.com/search/label/iot%20platform">iot platform</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://www.iotsharing.com/search/label/mqtt">mqtt</a>
<span class="label-count" dir="ltr">(3)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://www.iotsharing.com/search/label/node-red">node-red</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://www.iotsharing.com/search/label/Orange%20Pi">Orange Pi</a>
<span class="label-count" dir="ltr">(6)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://www.iotsharing.com/search/label/paho%20mqtt">paho mqtt</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://www.iotsharing.com/search/label/Projects">Projects</a>
<span class="label-count" dir="ltr">(9)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://www.iotsharing.com/search/label/Raspberry%20Pi">Raspberry Pi</a>
<span class="label-count" dir="ltr">(7)</span>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://www.iotsharing.com/search/label/sdcard">sdcard</a>
<span class="label-count" dir="ltr">(2)</span>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://www.iotsharing.com/search/label/Tools">Tools</a>
<span class="label-count" dir="ltr">(8)</span>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://www.iotsharing.com/search/label/ultrasonic%20sensor">ultrasonic sensor</a>
<span class="label-count" dir="ltr">(1)</span>
</span>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=7549705215513488945&amp;widgetType=Label&amp;widgetId=Label1&amp;action=editWidget&amp;sectionId=sidebarrightpbt" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Label1&quot;));" target="configLabel1" title="Edit">
<img alt="" height="18" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div><div class="widget HTML" data-version="1" id="HTML1">
<div class="widget-titlepbt"><h2 class="title">Recent Posts</h2></div>
<div class="widget-content">
<iframe src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/page.html" width="340" height="214" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowtransparency="true"></iframe>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=7549705215513488945&amp;widgetType=HTML&amp;widgetId=HTML1&amp;action=editWidget&amp;sectionId=sidebarrightpbt" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;HTML1&quot;));" target="configHTML1" title="Edit">
<img alt="" height="18" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div><div class="widget HTML" data-version="1" id="HTML3">
<div class="widget-content">
<script async="" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/f(3).txt"></script>
<!-- iotsharing.com -->
<ins class="adsbygoogle" style="display: block; height: 594px;" data-ad-client="ca-pub-9452082216626643" data-ad-slot="5896869611" data-ad-format="auto" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display: inline-table; border: none; height: 594px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 297px; background-color: transparent;"><ins id="aswift_0_anchor" style="display: block; border: none; height: 594px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 297px; background-color: transparent; overflow: hidden;"><iframe width="297" height="600" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;width:297px;height:600px;" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/saved_resource(1).html"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=7549705215513488945&amp;widgetType=HTML&amp;widgetId=HTML3&amp;action=editWidget&amp;sectionId=sidebarrightpbt" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;HTML3&quot;));" target="configHTML3" title="Edit">
<img alt="" height="18" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div><div class="widget PopularPosts" data-version="1" id="PopularPosts1">
<div class="widget-titlepbt"><h2>Popular Posts</h2></div>
<div class="widget-content popular-posts">
<ul>
<li>
<a href="http://www.iotsharing.com/2017/11/firmware-update-ota-for-esp32-using-http.html">Demo 35: firmware update OTA for ESP32 directly using HTTP</a>
</li>
<li>
<a href="http://www.iotsharing.com/2017/05/how-to-use-mqtt-to-build-smart-home-arduino-esp32.html">Demo 14: How to use MQTT and Arduino ESP32 to build a simple Smart home system</a>
</li>
<li>
<a href="http://www.iotsharing.com/2017/09/how-to-use-arduino-esp32-can-interface.html">Demo 31: How to use Arduino ESP32 CAN interface</a>
</li>
<li>
<a href="http://www.iotsharing.com/2017/08/esp32-tutorials.html">Arduino ESP32 tutorials</a>
</li>
<li>
<a href="http://www.iotsharing.com/2017/05/tcp-udp-ip-with-esp32.html">Demo 8: How to use TCP/IP with Arduino ESP32</a>
</li>
<li>
<a href="http://www.iotsharing.com/2017/07/how-to-use-arduino-esp32-i2s-to-play-wav-music-from-sdcard.html">Demo 26: How to use Arduino ESP32 I2S (external DAC and built-in DAC) to play wav music file from sdcard</a>
</li>
<li>
<a href="http://www.iotsharing.com/2017/05/how-to-turn-esp32-into-web-server.html">Demo 12: How to turn the Arduino ESP32 into a Web Server</a>
</li>
<li>
<a href="http://www.iotsharing.com/2017/05/how-to-use-smartconfig-on-esp32.html">Demo 11: How to use SmartConfig on Arduino ESP32</a>
</li>
<li>
<a href="http://www.iotsharing.com/2017/08/how-to-use-esp32-mqtts-with-mqtts-mosquitto-broker-tls-ssl.html">Demo 30: How to use Arduino ESP32 MQTTS with MQTTS Mosquitto broker (TLS/SSL)</a>
</li>
<li>
<a href="http://www.iotsharing.com/2017/05/how-to-use-arduino-esp32-to-store-data-to-sdcard.html">Demo 7: How to use Arduino ESP32 to store data to sdcard</a>
</li>
</ul>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=7549705215513488945&amp;widgetType=PopularPosts&amp;widgetId=PopularPosts1&amp;action=editWidget&amp;sectionId=sidebarrightpbt" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;PopularPosts1&quot;));" target="configPopularPosts1" title="Edit">
<img alt="" height="18" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div></div>
</div><!-- #secondary -->
</div><!-- #content -->
<footer class="site-footerpbt" id="colophonpbt" role="contentinfo">
<div class="site-infopbt smallpartpbt">
<!-- You should not edit or remove credits without our permission: premiumbloggertemplates.com -->
Copyright © <script type="text/javascript">var creditsyear = new Date();document.write(creditsyear.getFullYear());</script>2018
<a href="http://www.iotsharing.com/">IoT Sharing</a> | Powered by <a href="http://www.blogger.com/">Blogger</a><br>Design by <a href="http://crestaproject.com/" target="_blank">CrestaProject</a> | Blogger Theme by <a href="http://www.bloggertipandtrick.net/" target="_blank" title="Blogging Tutorials">Lasantha</a> - <a href="http://www.premiumbloggertemplates.com/" target="_blank" title="Free Blogger Templates">PremiumBloggerTemplates.com</a> | Distributed By <a href="http://gooyaabitemplates.com/" rel="dofollow" target="_blank">Gooyaabi Templates</a>
</div><!-- .site-info -->
</footer><!-- #colophon -->
</div><!-- #page -->
<a href="http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html#top" id="totoppbt" style="display: none;"><i class="fa fa-angle-up fa-lg"></i></a>
<script type="text/javascript">
//<![CDATA[

(function($) {
	"use strict";
	
	$(document).ready(function() {
	
		/*-----------------------------------------------------------------------------------*/
		/*  Home icon in main menu
		/*-----------------------------------------------------------------------------------*/ 
			$('.main-navigationpbt .menu-item-home a').prepend('<i class="fa fa-lg fa-home spacerightpbt"></i>');
			
		$(".widget-areapbt .widget h2").wrap("<div class='widget-titlepbt'></div>");
			
		/*-----------------------------------------------------------------------------------*/
		/*  Top Search Button
		/*-----------------------------------------------------------------------------------*/ 
		$('.top-search').click(function() {
			$('.topsearchformpbt').slideToggle('fast');
			$(this).toggleClass("active");
			return false;
		});
			
		/*-----------------------------------------------------------------------------------*/
		/*  Detect Mobile Browser
		/*-----------------------------------------------------------------------------------*/ 
		if ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
		} else {
		
			/*-----------------------------------------------------------------------------------*/
			/*  If menu has submenu
			/*-----------------------------------------------------------------------------------*/ 
				$('.main-navigationpbt').find("li").each(function(){
					if($(this).children("ul").length > 0){
						$(this).append("<span class='indicator'></span>");
					}
				});
			
			/*-----------------------------------------------------------------------------------*/
			/*  Scroll To Top
			/*-----------------------------------------------------------------------------------*/ 
				$("#totoppbt").scrollToTop();
		
		}
			
	});
	
})(jQuery);

//]]>
</script>
<script type="text/javascript">
//<![CDATA[

/**
 * navigation.js
 *
 * Handles toggling the navigation menu for small screens.
 */
( function() {
	var container, button, menu;

	container = document.getElementById( 'site-navigationpbt' );
	if ( ! container )
		return;

	button = container.getElementsByTagName( 'button' )[0];
	if ( 'undefined' === typeof button )
		return;

	menu = container.getElementsByTagName( 'ul' )[0];

	// Hide menu toggle button if menu is empty and return early.
	if ( 'undefined' === typeof menu ) {
		button.style.display = 'none';
		return;
	}

	if ( -1 === menu.className.indexOf( 'nav-menu' ) )
		menu.className += ' nav-menu';

	button.onclick = function() {
		if ( -1 !== container.className.indexOf( 'toggled' ) )
			container.className = container.className.replace( ' toggled', '' );
		else
			container.className += ' toggled';
	};
} )();

//]]>
</script>
<script type="text/javascript">
//<![CDATA[

// SmoothScroll for websites v1.2.1
// Licensed under the terms of the MIT license.

// People involved
//  - Balazs Galambosi (maintainer)  
//  - Michael Herf     (Pulse Algorithm)

!function(){function e(){var e=!1;e&&c("keydown",r),v.keyboardSupport&&!e&&u("keydown",r)}function t(){if(document.body){var t=document.body,o=document.documentElement,n=window.innerHeight,r=t.scrollHeight;if(S=document.compatMode.indexOf("CSS")>=0?o:t,w=t,e(),x=!0,top!=self)y=!0;else if(r>n&&(t.offsetHeight<=n||o.offsetHeight<=n)){var a=!1,i=function(){a||o.scrollHeight==document.height||(a=!0,setTimeout(function(){o.style.height=document.height+"px",a=!1},500))};if(o.style.height="auto",setTimeout(i,10),S.offsetHeight<=n){var l=document.createElement("div");l.style.clear="both",t.appendChild(l)}}v.fixedBackground||b||(t.style.backgroundAttachment="scroll",o.style.backgroundAttachment="scroll")}}function o(e,t,o,n){if(n||(n=1e3),d(t,o),1!=v.accelerationMax){var r=+new Date,a=r-C;if(a<v.accelerationDelta){var i=(1+30/a)/2;i>1&&(i=Math.min(i,v.accelerationMax),t*=i,o*=i)}C=+new Date}if(M.push({x:t,y:o,lastX:0>t?.99:-.99,lastY:0>o?.99:-.99,start:+new Date}),!T){var l=e===document.body,u=function(){for(var r=+new Date,a=0,i=0,c=0;c<M.length;c++){var s=M[c],d=r-s.start,f=d>=v.animationTime,h=f?1:d/v.animationTime;v.pulseAlgorithm&&(h=p(h));var m=s.x*h-s.lastX>>0,w=s.y*h-s.lastY>>0;a+=m,i+=w,s.lastX+=m,s.lastY+=w,f&&(M.splice(c,1),c--)}l?window.scrollBy(a,i):(a&&(e.scrollLeft+=a),i&&(e.scrollTop+=i)),t||o||(M=[]),M.length?E(u,e,n/v.frameRate+1):T=!1};E(u,e,0),T=!0}}function n(e){x||t();var n=e.target,r=l(n);if(!r||e.defaultPrevented||s(w,"embed")||s(n,"embed")&&/\.pdf/i.test(n.src))return!0;var a=e.wheelDeltaX||0,i=e.wheelDeltaY||0;return a||i||(i=e.wheelDelta||0),!v.touchpadSupport&&f(i)?!0:(Math.abs(a)>1.2&&(a*=v.stepSize/120),Math.abs(i)>1.2&&(i*=v.stepSize/120),o(r,-a,-i),void e.preventDefault())}function r(e){var t=e.target,n=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&e.keyCode!==H.spacebar;if(/input|textarea|select|embed/i.test(t.nodeName)||t.isContentEditable||e.defaultPrevented||n)return!0;if(s(t,"button")&&e.keyCode===H.spacebar)return!0;var r,a=0,i=0,u=l(w),c=u.clientHeight;switch(u==document.body&&(c=window.innerHeight),e.keyCode){case H.up:i=-v.arrowScroll;break;case H.down:i=v.arrowScroll;break;case H.spacebar:r=e.shiftKey?1:-1,i=-r*c*.9;break;case H.pageup:i=.9*-c;break;case H.pagedown:i=.9*c;break;case H.home:i=-u.scrollTop;break;case H.end:var d=u.scrollHeight-u.scrollTop-c;i=d>0?d+10:0;break;case H.left:a=-v.arrowScroll;break;case H.right:a=v.arrowScroll;break;default:return!0}o(u,a,i),e.preventDefault()}function a(e){w=e.target}function i(e,t){for(var o=e.length;o--;)z[N(e[o])]=t;return t}function l(e){var t=[],o=S.scrollHeight;do{var n=z[N(e)];if(n)return i(t,n);if(t.push(e),o===e.scrollHeight){if(!y||S.clientHeight+10<o)return i(t,document.body)}else if(e.clientHeight+10<e.scrollHeight&&(overflow=getComputedStyle(e,"").getPropertyValue("overflow-y"),"scroll"===overflow||"auto"===overflow))return i(t,e)}while(e=e.parentNode)}function u(e,t,o){window.addEventListener(e,t,o||!1)}function c(e,t,o){window.removeEventListener(e,t,o||!1)}function s(e,t){return(e.nodeName||"").toLowerCase()===t.toLowerCase()}function d(e,t){e=e>0?1:-1,t=t>0?1:-1,(k.x!==e||k.y!==t)&&(k.x=e,k.y=t,M=[],C=0)}function f(e){if(e){e=Math.abs(e),D.push(e),D.shift(),clearTimeout(A);var t=D[0]==D[1]&&D[1]==D[2],o=h(D[0],120)&&h(D[1],120)&&h(D[2],120);return!(t||o)}}function h(e,t){return Math.floor(e/t)==e/t}function m(e){var t,o,n;return e*=v.pulseScale,1>e?t=e-(1-Math.exp(-e)):(o=Math.exp(-1),e-=1,n=1-Math.exp(-e),t=o+n*(1-o)),t*v.pulseNormalize}function p(e){return e>=1?1:0>=e?0:(1==v.pulseNormalize&&(v.pulseNormalize/=m(1)),m(e))}var w,g={frameRate:150,animationTime:800,stepSize:120,pulseAlgorithm:!0,pulseScale:8,pulseNormalize:1,accelerationDelta:20,accelerationMax:1,keyboardSupport:!0,arrowScroll:50,touchpadSupport:!0,fixedBackground:!0,excluded:""},v=g,b=!1,y=!1,k={x:0,y:0},x=!1,S=document.documentElement,D=[120,120,120],H={left:37,up:38,right:39,down:40,spacebar:32,pageup:33,pagedown:34,end:35,home:36},v=g,M=[],T=!1,C=+new Date,z={};setInterval(function(){z={}},1e4);var A,N=function(){var e=0;return function(t){return t.uniqueID||(t.uniqueID=e++)}}(),E=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e,t,o){window.setTimeout(e,o||1e3/60)}}(),K=/chrome/i.test(window.navigator.userAgent),L="onmousewheel"in document;L&&K&&(u("mousedown",a),u("mousewheel",n),u("load",t))}();

//]]>
</script>
<script type="text/javascript">
//<![CDATA[

(function(a){a.fn.scrollToTop=function(c){var d={speed:1000};c&&a.extend(d,{speed:c});return this.each(function(){var b=a(this);a(window).scroll(function(){700<a(this).scrollTop()?b.fadeIn():b.fadeOut()});b.click(function(b){b.preventDefault();a("body, html").animate({scrollTop:0},d.speed)})})}})(jQuery);

//]]>
</script>

<script type="text/javascript" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/761964075-widgets.js.tải xuống"></script>
<script type="text/javascript">
window['__wavt'] = 'AOuZoY63Qh6F2btIwNoW4_NrB-SumWKZaQ:1534135621768';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d7549705215513488945','//www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html','7549705215513488945');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '7549705215513488945', 'title': 'IoT Sharing', 'url': 'http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html', 'canonicalUrl': 'http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html', 'homepageUrl': 'http://www.iotsharing.com/', 'searchUrl': 'http://www.iotsharing.com/search', 'canonicalHomepageUrl': 'http://www.iotsharing.com/', 'blogspotFaviconUrl': 'http://www.iotsharing.com/favicon.ico', 'bloggerUrl': 'https://www.blogger.com', 'hasCustomDomain': true, 'httpsEnabled': false, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'encoding': 'UTF-8', 'locale': 'en', 'localeUnderscoreDelimited': 'en', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22IoT Sharing - Atom\x22 href\x3d\x22http://www.iotsharing.com/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22IoT Sharing - RSS\x22 href\x3d\x22http://www.iotsharing.com/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22IoT Sharing - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/7549705215513488945/posts/default\x22 /\x3e\n\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22IoT Sharing - Atom\x22 href\x3d\x22http://www.iotsharing.com/feeds/3256809335366798245/comments/default\x22 /\x3e\n', 'meTag': '', 'adsenseClientId': 'ca-pub-1490514015529571', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': false, 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/cd503876782563b4', 'plusOneApiSrc': 'https://apis.google.com/js/plusone.js', 'sharing': {'platforms': [{'name': 'Get link', 'key': 'link', 'shareMessage': 'Get link', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': 'Share to Facebook', 'target': 'facebook'}, {'name': 'BlogThis!', 'key': 'blogThis', 'shareMessage': 'BlogThis!', 'target': 'blog'}, {'name': 'Twitter', 'key': 'twitter', 'shareMessage': 'Share to Twitter', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': 'Share to Pinterest', 'target': 'pinterest'}, {'name': 'Google+', 'key': 'googlePlus', 'shareMessage': 'Share to Google+', 'target': 'googleplus'}, {'name': 'Email', 'key': 'email', 'shareMessage': 'Email', 'target': 'email'}], 'googlePlusShareButtonWidth': 300, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27en\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': 'Read more', 'pageType': 'item', 'postId': '3256809335366798245', 'pageName': 'Why Finite State Machine (FSM) is important to Arduino ESP32', 'pageTitle': 'IoT Sharing: Why Finite State Machine (FSM) is important to Arduino ESP32', 'metaDescription': ''}}, {'name': 'features', 'data': {'cmt_anon_warn': 'false', 'lazy_images': 'false', 'poll_static': 'true', 'sharing_get_link_dialog': 'true', 'sharing_native': 'false'}}, {'name': 'messages', 'data': {'edit': 'Edit', 'linkCopiedToClipboard': 'Link copied to clipboard!', 'ok': 'Ok', 'postLink': 'Post Link'}}, {'name': 'template', 'data': {'name': 'custom', 'localizedName': 'Custom', 'isResponsive': false, 'isAlternateRendering': false, 'isCustom': true}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': 'Why Finite State Machine (FSM) is important to Arduino ESP32', 'description': 'This is a place where I can share my knowledge of: IoT, machine learning self learning and other interetsing topics.', 'url': 'http://www.iotsharing.com/2017/05/how-to-apply-finite-state-machine-to-arduino-esp32-avoid-blocking.html', 'type': 'item', 'isSingleItem': true, 'isMultipleItems': false, 'isError': false, 'isPage': false, 'isPost': true, 'isHomepage': false, 'isArchive': false, 'isLabelSearch': false, 'postId': 3256809335366798245}}]);
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'headersec', null, document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'mainblogsec', null, document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'useNgc': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/1117533592-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/368954415-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_TextView', new _WidgetInfo('Text1', 'sidebarrightpbt', null, document.getElementById('Text1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_LabelView', new _WidgetInfo('Label1', 'sidebarrightpbt', null, document.getElementById('Label1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML1', 'sidebarrightpbt', null, document.getElementById('HTML1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML3', 'sidebarrightpbt', null, document.getElementById('HTML3'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_PopularPostsView', new _WidgetInfo('PopularPosts1', 'sidebarrightpbt', null, document.getElementById('PopularPosts1'), {}, 'displayModeFull'));
</script>

<iframe id="google_osd_static_frame_3444488296759" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;" src="./Why Finite State Machine (FSM) is important to Arduino ESP32 _ IoT Sharing_files/saved_resource(2).html"></iframe></body></html>